---
title: "Common data models and data management plans"
author: Travis Gerke, ScD
output:
  xaringan::moon_reader:
    css: xaringan-themer.css
    seal: false
---

```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)
# main 3 cstructure colors: #3374b5 (blue), #65dbaa (green), #ed7e39 (orange)
style_duo_accent(
  primary_color = "#3374b5",
  secondary_color = "#65dbaa",
  colors = list(
    blue = "#3374b5",
    green = "#65dbaa",
    orange = "#ed7e39",
    white = "#ffffff",
    gray = "#c2c7cf",
    darkgray = "#6f7e8f",
    darkblue = "#292d59"
  ),
  extra_fonts = list(google_font("Raleway"))
)
```

class: title-slide-custom

# No more moving arrows around on slides
## DAGs, causal workflows, and how to scale them

#### .blue[Travis Gerke, ScD]

<img src="images/cstruct_logo_512.png" class="title-logo">
<p class="logo-text orange">cstructure.io</p>

<!--
Photo by <a href="https://unsplash.com/@helloimnik?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Nik</a> on <a href="https://unsplash.com/photos/right-arrow-sign-on-wall-MAgPyHRO0AA?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>
-->

---
class: compact-bio

## Hi, I'm Travis

.pull-left[
<img src="images/bio1.png">

<img src="images/bio3.jpg">
]

.pull-right[
<div class="disclosures-box">
  <img src="images/bio2.png">
  <div class="arrow-head"></div>
  <div class="disclosures-label">(disclosures)</div>
</div>
]

---
class: orange-bg, center, middle

## .white[A brief history of DAG tooling]

---
### Upper Paleolithic period

El Castillo, Spain

<br>

.center[
<img src="images/el-castillo-3.jpg" style="width: 30%; margin: 0 1%;">
<img src="images/el-castillo-2.jpg" style="width: 30%; margin: 0 1%;">
<img src="images/el-castillo-1.jpeg" style="width: 30%; margin: 0 1%;">
]

<!--A notable example of prehistoric cave art that features graphical arrows indicating cause and effect is found in the Cave of El Castillo in Spain.
In this cave, there are paintings that depict a series of figures with arrows drawn between them. These arrows visually connect actions, such as a hunter and an animal, suggesting a sequence of events or a narrative flow. The arrows indicate a cause (the hunter's action) leading to an effect (the animal being hunted).
This use of graphical arrows is significant as it demonstrates an early understanding of narrative storytelling and the relationship between actions and their consequences in human behavior. The artwork dates back to the Upper Paleolithic period, around 40,000 years ago, making it one of the earliest known examples of this conceptual representation in art.
-->

---
### 1980s: Pearl et al.

.pull-left[
<img src="images/pearl.png" style="width: 80%;">
]

--

.pull-right[
<img src="images/pencil.jpg" style="width: 100%;">
]

---
### 1990s: Robins et al.

DAGs should be collaboratively constructed

<br>

<div style="display: inline-block; width: 40%; vertical-align: top;">
<img src="images/impossibility.png" style="width: 100%; margin-left: -25px;">
</div>

--

<div style="display: inline-block; width: 25%; vertical-align: top;">
<img src="images/post-it.png" style="width: 100%; margin-left: -25px; margin-right: 30px;">
</div>

--

<div style="display: inline-block; width: 30%; vertical-align: top;">
<img src="images/whiteboard.jpeg" style="width: 100%;">
</div>

---
### 1990s - present: PowerPoint!(?)

<br>

.pull-left[
<img src="images/ppt.png" style="width: 100%;">
]

--

<br> 

.pull-right[
<img src="images/ppt-dag.png" style="width: 100%;">
]

---
### 2011: DAGitty

<div style="display: flex; justify-content: flex-start; gap: 20px; margin-left: -5%;">
  <div style="flex: 1;">
    <img src="images/daggity-1.png" style="width: 110%; max-width: none;">
  </div>
  <div style="flex: 1;">
    <img src="images/daggity-2.png" style="width: 110%; max-width: none;">
  </div>
</div>

---
### 2000s - present: Programmatic

$\LaTeX$ / R / Python

<br>

<div style="position: relative; height: 480px; width: 100%;">
  <div style="position: absolute; top: 0; left: 0; width: 60%; z-index: 1;">
    <img src="images/latex.png" style="width: 100%;">
  </div>
  
--
  
  <div style="position: absolute; top: 20px; left: 20%; width: 60%; z-index: 2;">
    <img src="images/ggdag.png" style="width: 100%;">
  </div>
  
--
  
  <div style="position: absolute; top: 40px; left: 40%; width: 60%; z-index: 3;">
    <img src="images/causaldag.png" style="width: 100%;">
  </div>
</div>

---
class: green-bg, center, middle

## .white[Wait: wasn't this a talk about data science?]

---
### DAG creation can be data science

But there are two primary gaps with current tooling:

* #### The .green[data] is siloed from the DAG

* #### Emphasizing programming may distance .green[science] from DAG creation

---
class: green-bg, center, middle

## .white[Overview of a new platform]

---

<img src="images/dream.png", style="width: 90%;">

.center[Join at .blue[cstructure.net]!]

---
### A blank canvas 

<img src="images/landing.png", style="width: 100%;">

---
### Nodes

.center[<img src="images/nodes.png", style="width: 90%;">]

---
### Ask a Causal Question

.center[<img src="images/causal-question.png", style="width: 100%;">]

---
### Auto-SCM

.center[<img src="images/autoscm.png", style="width: 100%;">]

---
### Layer data

.center[<img src="images/layerdata.png", style="width: 100%;">]

---
### Generate a script

.center[<img src="images/generater.png", style="width: 100%;">]

---
### Estimate

.center[<img src="images/estimate.png", style="width: 100%;">]

---
### Modify

<img src="images/modify.png", style="width: 112%; margin-left: -5%; max-width: none;">

---
class: green-bg, center, middle

## .white[Mapping DAGs to data science: 2 keys]

---
class: orange-bg, center, middle

## .white[DAGs should adhere to a common data model]

---
## A JSON spec

.pull-left[
Nodes

<img src="images/json-nodes.png" style="width: 100%;">
]

.pull-right[
Edges

<img src="images/json-edges.png" style="width: 100%;">
]

---
## Data model allows: Layering of data

.center[<img src="images/layerdata.png", style="width: 100%;">]

---
## Data model allows: Embedded references for edges

<div style="position: relative; height: 480px; width: 100%;">
  <div style="position: absolute; top: 0; left: 0; width: 60%; z-index: 1;">
    <img src="images/evidence1.png" style="width: 140%; margin-left: -5%; max-width: none;">
  </div>
  
--
  
  <div style="position: absolute; top: 20px; left: 10%; width: 60%; z-index: 2;">
    <img src="images/evidence2.png" style="width: 140%; margin-left: -5%; max-width: none;">
  </div>
  
--
  
  <div style="position: absolute; top: 40px; left: 20%; width: 60%; z-index: 3;">
    <img src="images/evidence3.png" style="width: 140%; margin-left: -5%; max-width: none;">
  </div>
</div>

---
## Data model allows: LLM assistance

.center[<img src="images/autoscm.png", style="width: 100%;">]

---
## Data model allows: DAG version control

.center[<img src="images/versioning.png", style="width: 100%;">]

---
class: orange-bg, center, middle

## .white[DAGs should be collaborative]

---

<img src="images/collaborative.png">

---

.center[<img src="images/dream.png", style="width: 80%;">]

.center[Join at .blue[cstructure.net]!<br>General platform at .blue[cstructure.io]<br>Reach out any time .blue[travis@cstructure.io]]


```{css, echo = FALSE}
.compact-bio h2 {
  margin-bottom: 0em;
}

.compact-bio .pull-right {
  width: 53%;
  margin-left: 2%;
  margin-top: 15px;  /* Move down by adding top margin */
}

.compact-bio .pull-left {
  width: 45%;
}

.disclosures-box {
  position: relative;
}

.disclosures-box::before {
  content: "";
  position: absolute;
  top: 13%;  /* Offset from the top */
  left: 0;
  right: 0;
  height: 28%;  /* Adjust this to control how much of the top is covered */
  border: 3px solid var(--orange);
  border-radius: 5px;
  z-index: 1;
  pointer-events: none;
}

.disclosures-box::after {
  content: "";
  position: absolute;
  top: calc(14% + 28%);  /* Position at bottom of box */
  right: 10%;  /* Offset from right */
  width: 3px;  /* Width of arrow shaft */
  height: 50%;  /* Length of arrow */
  background-color: var(--orange);
  z-index: 1;
}

/* Arrow head */
.arrow-head {
  position: absolute;
  bottom: 5%;
  right: 7.5%;
  width: 0;
  height: 0;
  border-left: 12px solid transparent;
  border-right: 12px solid transparent;
  border-top: 20px solid var(--orange);
  z-index: 2;
}

.disclosures-label {
  position: absolute;
  bottom: -4%;
  right: -3%;
  color: var(--orange);
  font-weight: bold;
  font-size: 1em;
  z-index: 2;
}

.title-slide-custom {
  position: relative;
  z-index: 1;
}
.title-slide-custom h1 {
  font-size: 2em;
  position: absolute;
  top: 2%;
  left: 2%;
}
.title-slide-custom h2 {
  font-size: 1.3em;
  color: var(--orange);
  position: absolute;
  top: 12%;
  left: 2%;
}
.title-slide-custom h3 {
  font-size: .75em;
  color: var(--blue);
  position: absolute;
  bottom: 2%;
  left: 2%;
}
.title-slide-custom h4 {
  font-size: .75em;
  color: var(--orange);
  position: absolute;
  bottom: 0%;
  left: 2%;
}
.title-logo {
  position: absolute;
  bottom: 5%;
  right: 2%;
  width: 100px;
  height: auto;
}
.logo-text {
  position: absolute;
  bottom: 2%;
  right: 3%;
  margin: 0;
  font-size: 0.7em;
  color: var(--blue);
}
.title-slide-custom::before {    
      content: "";
      background-image: url('images/nik-MAgPyHRO0AA-unsplash.jpg');
      background-size: cover;
      position: absolute;
      top: 0px;
      right: 0px;
      bottom: 0px;
      left: 0px;
      opacity: 0.7;
      z-index: -1;
}
.title-slide-custom .remark-slide-number {
  display: none;
}
.green-bg {
  background-color: var(--green);
}
.orange-bg {
  background-color: var(--orange);
}
.h-center {
  margin: 0 auto;
}
.w-90 {
  width: 90%;
}
.w-50 {
  width: 50%;
}
.small-rule{
  font-size: 1em;
  font-weight: bold;
  color: var(--darkblue);
}

.highlight-last-item > ul > li, 
.highlight-last-item > ol > li {
  opacity: 0.5;
  color: var(--orange);
}
.highlight-last-item > ul > li:last-of-type,
.highlight-last-item > ol > li:last-of-type {
  opacity: 1;
  font-weight: bold;
}
```
